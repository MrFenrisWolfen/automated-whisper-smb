------------------------------- Basics --------------------------------------

sudo apt update

sudo apt install curl

sudo apt install nvidia-driver-550-server

reboot

------------------------------- Docker --------------------------------------

# Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update


sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin


------------------------------- Nvidia - Toolkit-----------------------------

curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \
  && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \
    sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \
    sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list


sudo apt-get update

sudo apt-get install -y nvidia-container-toolkit

sudo nvidia-ctk runtime configure --runtime=docker

sudo systemctl restart docker


---------------------------------------------------------------------------------








++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


1. Docker:
Quelle: https://docs.docker.com/engine/install/ubuntu/


# Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update


---------------------------------------------------------------------------------------------------------------------------------

2. Docker-2


sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin


---------------------------------------------------------------------------------------------------------------------------------

3. Docker Verify

sudo docker run hello-world


---------------------------------------------------------------------------------------------------------------------------------

4. gpu vorhanden?

sudo lshw -C Display


---------------------------------------------------------------------------------------------------------------------------------

5. install nvidia Driver

sudo apt install nvidia-driver-550 nvidia-dkms-550


---------------------------------------------------------------------------------------------------------------------------------

6. check if nvidia gpu works

nvidia-smi

---------------------------------------------------------------------------------------------------------------------------------

7. install nvidia toolkit for docker

curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \
  && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \
    sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \
    sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list


sudo apt-get update


sudo apt-get install -y nvidia-container-toolkit


sudo nvidia-ctk runtime configure --runtime=docker


sudo systemctl restart docker


---------------------------------------------------------------------------------------------------------------------------------

8. test if docker works with gpu support now

sudo docker run --rm --runtime=nvidia --gpus all ubuntu nvidia-smi

(if the Output is the same as smi, it works!)


---------------------------------------------------------------------------------------------------------------------------------

9. docker-compose is outdated, profiles are only working with Version >= 2.1 (1.21 is installed)

sudo rm /usr/local/bin/docker-compose

sudo curl -L "https://github.com/docker/compose/releases/download/v2.21.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

sudo chmod +x /usr/local/bin/docker-compose



----------------------------------------------------------------------------------------------------------------------------------
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

 2  sudo apt update
    3  sudo apt install cuda-12-6
    4  sudo add-apt-repository ppa:graphics-drivers/ppa
    5  sudo apt-get update
    6  sudo apt install cuda-12-6
    7  sudo add-apt-repository ppa:graphics-drivers/ppa
    8  sudo apt-get update
    9  apt update
   10  sudo apt update
   11  sudo apt install cuda-12-6
   12  nvcc -version
   13  sudo apt install nvidia-cuda-toolkit
   14  sudo dpkg -i cuda-repo-<version>.deb
   15  sudo apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/<distro>/x86_64/7fa2af80.pub
   16  sudo apt-get update
   17  sudo apt-get install cuda
   18  sudo apt-get install cuda-12-6
   19  wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/cuda-keyring_1.1-1_all.deb
   20  sudo dpkg -i cuda-keyring_1.1-1_all.deb
   21  sudo apt-get update
   22  sudo apt install cuda-12-6
   23  nvidia-smi
   24  sudo reboot
   25  sudo docker-compose version
   26  nvidia-smi
   27  sudo nvidia-ctk runtime configure --runtime=docker
   28  sudo apt-get install -y nvidia-container-toolkit
   29  nvidia-smi
   30  sudo nvidia-ctk runtime configure --runtime=docker
   31  sudo systemctl restart docker
   32  sudo docker ps
   33  sudo docker run --gpus all -it nvidia/cuda:12.6.3-cudnn-devel-ubuntu20.04 bash
   34  sudo reboot
   35  sudo docker run --gpus all -it nvidia/cuda:12.6.3-cudnn-devel-ubuntu20.04 bash
   36  sudo nvidia-ctk runtime configure --runtime=docker
   37  sudo docker run --runtime nvidia -it nvidia/cuda:12.6.3-cudnn-devel-ubuntu20.04 bash
   38  sudo docker run --gpus all -it nvidia/cuda:12.6.3-cudnn-devel-ubuntu20.04 bash
   39  cd /var/snap/
   40  ls
   41  cd docker/
   42  ls
   43  cd current
   44  ls
   45  cd config/
   46  ls
   47  cat daemon.json
   48  ls
   49  nvidia-ctk runtime configure --runtime=docker
   50  cat /etc/docker/daemon.json
   51  sudo nano daemon.json
   52  sudo reboot
   53  sudo docker run --gpus all -it nvidia/cuda:12.6.3-cudnn-devel-ubuntu20.04 bash
   54  sudo docker
   55  sudo docker run --gpus all -it nvidia/cuda:12.6.3-cudnn-devel-ubuntu20.04 bash
   56  history



https://saturncloud.io/blog/how-to-install-pytorch-on-the-gpu-with-docker/

https://hub.docker.com/r/nvidia/cuda/tags

https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&Distribution=Ubuntu&target_version=24.04&target_type=deb_network



wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/cuda-keyring_1.1-1_all.deb
sudo dpkg -i cuda-keyring_1.1-1_all.deb
sudo apt-get update

sudo apt install cuda-12-6

reboot

sudo apt-get update
sudo apt-get install apt-transport-https ca-certificates curl software-properties-common -y

curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null


sudo apt-get update

sudo apt-get install docker-ce docker-ce-cli containerd.io -y

sudo apt install nvidia-cuda-toolkit -y

sudo nvidia-ctk runtime configure --runtime=docker

sudo systemctl restart docker

sudo docker run --gpus all -it nvidia/cuda:12.6.3-cudnn-devel-ubuntu20.04 bash




----------------------------------------------------------------






